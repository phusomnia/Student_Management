CREATE DATABASE DULIEU;
USE DULIEU;
DROP DATABASE DULIEU;

CREATE TABLE SINHVIEN(
	MASV VARCHAR(10) NOT NULL,
	HOTEN VARCHAR(50) NOT NULL,
    LOP VARCHAR(10) NOT NULL, # FK
    DCHI VARCHAR(250) NOT NULL,
    NGSINH DATE NOT NULL,
	GTINH VARCHAR(5) NOT NULL,
    SDT VARCHAR(12) NOT NULL,
    PRIMARY KEY (MASV)
);

CREATE TABLE GIANGVIEN(
	MAGV VARCHAR(10) NOT NULL,
    HOTEN VARCHAR(50) NOT NULL,
    NGSINH DATE NOT NULL,
    GTINH VARCHAR(5) NOT NULL,
    KHOA VARCHAR(10) NOT NULL,
    PRIMARY KEY(MAGV)
);

CREATE TABLE LOP(
	MALOP VARCHAR(10) NOT NULL,
	TENLOP VARCHAR(50) NOT NULL,
    KHOA VARCHAR(50) NOT NULL, # FK
    KHOAHOC VARCHAR(10) NOT NULL,
    HEDAOTAO VARCHAR(100) NOT NULL,
    PRIMARY KEY (MALOP)
);

CREATE TABLE KHOA(
	MAKHOA VARCHAR(10) NOT NULL,
    TENKHOA VARCHAR(50) NOT NULL,
    SDT VARCHAR(12) NOT NULL,
	PHONG VARCHAR(10) NOT NULL,
    TRGKHOA VARCHAR(10) NOT NULL,
    PRIMARY KEY (MAKHOA)
);

CREATE TABLE MONHOC(
	MAMH VARCHAR(10) NOT NULL,
    TENMH VARCHAR(50) NOT NULL,
    SOTC INT NOT NULL,
    PRIMARY KEY (MAMH)
);

CREATE TABLE NHOMMONHOC(
	MANHOM VARCHAR(10) NOT NULL,
    GV VARCHAR(10) NOT NULL, # FK
    MH VARCHAR(10) NOT NULL, # FK
    TENNHOM VARCHAR(150) NOT NULL,
    PRIMARY KEY (MANHOM)
);

CREATE TABLE DANGKYNHOM(
	MASV VARCHAR(10) NOT NULL,
    NHOM VARCHAR(10) NOT NULL
);

CREATE TABLE CHITIETBANGDIEM(
	MABD VARCHAR(10) NOT NULL,
    MANHOM VARCHAR(10) NOT NULL, # FK
    DIEM_QUATRINH VARCHAR(10), # FK
    HESO_QT FLOAT NOT NULL,
    DIEMTHI FLOAT,
    HESO_THI FLOAT NOT NULL,
    DIEMTB_HE10 FLOAT,
    DIEMTB_HE4 FLOAT,
    PRIMARY KEY (MANHOM)
);

CREATE TABLE BANGDIEM(
	MABD VARCHAR(10) NOT NULL,
    MASV VARCHAR(10) NOT NULL,
    HOCKY VARCHAR(10) NOT NULL,
    NAMHOC VARCHAR(4) NOT NULL,
    DIEMTK_HE4 FLOAT,
    DIEMTK_HE10 FLOAT,
    XEPLOAIHK VARCHAR(10),
    DIEMTB_TL FLOAT,
    TONGTINCHI INT
);

INSERT INTO SINHVIEN (MASV, HOTEN, LOP, DCHI, NGSINH, GTINH, SDT) VALUES 
(123, 'Tu Anh Phu', 'DCT-1222', 'Q1','2004-02-11', 'Nam', '12345678'),
(456, 'Nguyen Van Huong', 'TCKT-1221', 'Q8','2004-01-12', 'Nu', '12345678');

INSERT INTO GIANGVIEN (MAGV, HOTEN, NGSINH, GTINH, KHOA) VALUES
('GV001', 'Nguyen Van A', '1980-05-15', 'Nam', 'CNTT'),
('GV002', 'Tran Thi B', '1975-09-23', 'Nu', 'CNTT'),
('GV003', 'Le Van C', '1988-02-10', 'Nam', 'TCKT'),
('GV004', 'Pham Thi D', '1983-11-30', 'Nu', 'TCKT');

INSERT INTO LOP (MALOP, TENLOP, KHOA, KHOAHOC, HEDAOTAO) VALUES 
('DCT-1222', 'DCT-1222', 'CNTT', '2023', 'Chinh Quy'),
('TCKT-1221', 'DCT-1224', 'TCKT', '2020', 'Tu Xa');

INSERT INTO KHOA (MAKHOA, TENKHOA, SDT, PHONG, TRGKHOA) VALUES 
('CNTT', 'Cong Nghe Thong Tin', '123456789', 'B302', '3122'),
('TCKT', 'Tai Chinh - Ke Toan', '987654321', 'B301', '3123');

INSERT INTO MONHOC (MAMH, TENMH, SOTC) VALUES
('841020', 'Co So Du Lieu', 3),
('841401', 'Kien Truc May Tinh', 3),
('841603', 'Tieng Anh Giao Tiep', 2),
('841704', 'Triet Hoc Mac-Lenin', 3);

INSERT INTO NHOMMONHOC (MANHOM, GV, MH, TENNHOM) VALUES
('NH001', 'GV001', '841020', 'Nhom 1'),
('NH004', 'GV001', '841401', 'Nhom 4'),
('NH003', 'GV003', '841603', 'Nhom 3'),
('NH005', 'GV003', '841704', 'Nhom 5');

INSERT INTO DANGKYNHOM (MASV, NHOM) VALUES
('123', 'NH001'),
('123', 'NH004'),
('456', 'NH003'),
('456', 'NH005');

INSERT INTO CHITIETBANGDIEM (MABD, MANHOM, DIEM_QUATRINH, HESO_QT, DIEMTHI, HESO_THI, DIEMTB_HE10, DIEMTB_HE4) VALUES
('BD001', 'NH001', 5, 0.5, 7.5, 0.5, 8.0, 3.2),
('BD002', 'NH004', 5, 0.6, 8.0, 0.4, 8.5, 3.5),
('BD003', 'NH003', 8, 0.5, 6.5, 0.5, 7.2, 2.9),
('BD004', 'NH005', 6, 0.5, 7.2, 0.5, 7.8, 3.2);

INSERT INTO BANGDIEM (MABD, HOCKY, NAMHOC, DIEMTK_HE4, DIEMTK_HE10, XEPLOAIHK, DIEMTB_TL, TONGTINCHI, MASV) VALUES
('BD001', 'Hoc ky 1', '2022', 3.2, 8.0, 'Gioi', 3.5, 25, '123'),
('BD002', 'Hoc ky 2', '2022', 3.4, 8.2, 'Xuat sac', 3.7, 25, '123'),
('BD003', 'Hoc ky 1', '2022', 3.1, 7.8, 'Gioi', 3.4, 25, '456'),
('BD004', 'Hoc ky 2', '2022', 3.2, 8.0, 'Xuat sac', 3.6, 25, '456');


